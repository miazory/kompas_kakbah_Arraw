<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Fun Fact Daerah</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css?family=Pacifico&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Montserrat', Arial, sans-serif;
            background-color: #f8f2e9;
            color: #333;
            margin: 0;
            padding: 0;
        }
        header {
            position: sticky;
            top: 0;
            background: #f8f2e9;
            padding: 32px 0 12px 0;
            z-index: 20;
            text-align: center;
        }
        nav {
            margin-bottom: 10px;
        }
        nav a {
            margin: 0 24px;
            text-decoration: none;
            color: #d4c09c;
            font-weight: 600;
            font-size: 1.15em;
            transition: color 0.2s;
            letter-spacing: 0.5px;
        }
        nav a.active, nav a:hover {
            color: #222;
        }
        .region-sticky {
            position: sticky;
            top: 70px;
            z-index: 10;
            background: linear-gradient(to bottom, #f8f2e9 90%, transparent 100%);
            padding: 30px 0 0 0;
            min-height: 120px;
            pointer-events: none;
        }
        .region-sticky-inner {
            margin-left: 40px;
        }
        .funfact-label {
            font-size: 1.1em;
            color: #444;
            letter-spacing: 2px;
            margin-bottom: 10px;
        }
        .region-name {
            font-family: 'Pacifico', cursive;
            font-size: 4em;
            color: #d4af37;
            margin-bottom: 0;
            margin-top: 0;
            transition: opacity 0.7s, transform 0.7s;
            opacity: 1;
            transform: translateY(0);
            position: relative;
            z-index: 2;
            display: inline-block;
            line-height: 1.1;
            white-space: pre-line;
        }
        .region-name.fade-out {
            opacity: 0;
            transform: translateY(-40px);
            transition: opacity 0.7s, transform 0.7s;
        }
        .region-name.fade-in {
            opacity: 1;
            transform: translateY(0);
            transition: opacity 0.7s, transform 0.7s;
        }
        .slides {
            width: 100%;
            max-width: 1100px;
            margin: 0 auto;
            padding: 0 0 60px 0;
        }
        .slide {
            display: flex;
            align-items: center;
            min-height: 100vh;
            gap: 60px;
            opacity: 0;
            transform: translateY(60px);
            transition: opacity 0.8s, transform 0.8s;
            padding: 0 40px;
            box-sizing: border-box;
        }
        .slide.visible {
            opacity: 1;
            transform: translateY(0);
        }
        .slide.fade-out {
            opacity: 0;
            transform: translateY(-60px);
            transition: opacity 0.7s, transform 0.7s;
        }
        .slide-img {
            flex: 1 1 350px;
            max-width: 420px;
            min-width: 220px;
            text-align: center;
        }
        .slide-img img {
            width: 100%;
            max-width: 420px;
            border-radius: 8px;
            box-shadow: 0 4px 24px #0001;
        }
        .slide-desc {
            flex: 1 1 320px;
            min-width: 220px;
            max-width: 500px;
        }
        .slide-desc h3 {
            margin: 0 0 10px 0;
            font-size: 1.2em;
            color: #444;
            letter-spacing: 1px;
        }
        .slide-desc p {
            margin: 0;
            color: #666;
            font-size: 1em;
            line-height: 1.6;
        }
        .slide.even {
            flex-direction: row-reverse;
        }
        @media (max-width: 900px) {
            .slides { padding: 0 0 40px 0; }
            .slide, .slide.even {
                flex-direction: column !important;
                gap: 20px;
                align-items: center;
                padding: 0 10px;
            }
            .slide-img img { max-width: 90vw; }
        }
        @media (max-width: 700px) {
            .region-name { font-size: 2em; }
            nav a { margin: 0 10px; font-size: 1em; }
            .region-sticky-inner { margin-left: 10px; }
        }
    </style>
</head>
<body>
    <header>
    <nav>
      <a href="{{ url_for('index') }}">Home</a>
      <a href="{{ url_for('qibla') }}">Qibla Finder</a>
      <a href="{{ url_for('kidung') }}"class="active">Kidung Rimba</a>
    </nav>
    </header>
    <div class="region-sticky">
        <div class="region-sticky-inner">
            <div class="funfact-label">FUN FACT</div>
            <div class="region-name" id="regionName">Kalimantan<br>Barat</div>
        </div>
    </div>
    <div class="slides" id="slides">
        <!-- Set data-region di setiap awal daerah baru -->
        <div class="slide odd" data-region="Kalimantan<br>Tengah">
            <div class="slide-img">
                <img src="{{ url_for('static', filename='img/sample.png') }}" alt="Rumah Betang">
            </div>
            <div class="slide-desc">
                <h3>ARSITEKTUR</h3>
                <p>Rumah tradisional Kalimantan Tengah, 'Huma Betang' atau 'Rumah Betang' dapat mencapai Panjang hingga 150 meter dan dihuni oleh belasan keluarga.</p>
            </div>
        </div>
        <div class="slide even">
            <div class="slide-img">
                <img src="{{ url_for('static', filename='img/sample.png') }}" alt="Juhu Singkah">
            </div>
            <div class="slide-desc">
                <h3>KULINER</h3>
                <p>Juhu Singkah adalah makanan khas Dayak berbahan utama rotan muda yang dimasak dengan santan dan rempah-rempah.</p>
            </div>
        </div>
        <div class="slide odd">
            <div class="slide-img">
                <img src="{{ url_for('static', filename='img/sample.png') }}" alt="Tari Mandau">
            </div>
            <div class="slide-desc">
                <h3>SENI</h3>
                <p>Tari Mandau adalah tarian perang tradisional yang menggambarkan keberanian dan keperkasaan suku Dayak.</p>
            </div>
        </div>
        <div class="slide even">
            <div class="slide-img">
                <img src="{{ url_for('static', filename='img/sample.png') }}" alt="Sebangau">
            </div>
            <div class="slide-desc">
                <h3>ALAM</h3>
                <p>Taman Nasional Sebangau adalah rumah bagi orangutan liar dan ekosistem gambut yang luas di Kalimantan Tengah.</p>
            </div>
        </div>
        <!-- Kalimantan Barat -->
        <div class="slide odd" data-region="Kalimantan<br>Barat">
            <div class="slide-img">
                <img src="{{ url_for('static', filename='img/sample.png') }}" alt="Rumah Radakng">
            </div>
            <div class="slide-desc">
                <h3>ARSITEKTUR</h3>
                <p>Rumah Radakng adalah rumah panjang tradisional suku Dayak Kanayatn di Kalimantan Barat, bisa mencapai panjang 138 meter.</p>
            </div>
        </div>
        <div class="slide even">
            <div class="slide-img">
                <img src="{{ url_for('static', filename='img/sample.png') }}" alt="Bubur Pedas">
            </div>
            <div class="slide-desc">
                <h3>KULINER</h3>
                <p>Bubur pedas adalah makanan khas Kalimantan Barat yang terbuat dari beras tumbuk, sayuran, dan rempah-rempah.</p>
            </div>
        </div>
        <!-- Tambahkan slide berikutnya sesuai kebutuhan -->
    </div>
    <script>
        // Fade in/out animasi slide
        const slides = document.querySelectorAll('.slide');
        const header = document.querySelector('header');
        const regionName = document.getElementById('regionName');
        let currentRegion = regionName.innerHTML;

        // Fade in dari bawah
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, { threshold: 0.3 });
        slides.forEach(slide => observer.observe(slide));

        // Fade out slide saat menyentuh header
        function checkSlideFade() {
            slides.forEach(slide => {
                const rect = slide.getBoundingClientRect();
                const headerRect = header.getBoundingClientRect();
                if (rect.top < headerRect.bottom + 20) {
                    slide.classList.add('fade-out');
                } else {
                    slide.classList.remove('fade-out');
                }
            });
        }
        window.addEventListener('scroll', checkSlideFade);
        window.addEventListener('resize', checkSlideFade);
        checkSlideFade();

        // Fade in/out region name (sticky judul daerah)
        function updateRegionName() {
            let found = false;
            let minDist = Infinity;
            let region = currentRegion;
            slides.forEach(slide => {
                if (slide.dataset.region) {
                    const rect = slide.getBoundingClientRect();
                    const slideCenter = rect.top + rect.height / 2;
                    const dist = Math.abs(window.innerHeight / 2 - slideCenter);
                    if (dist < minDist) {
                        minDist = dist;
                        region = slide.dataset.region;
                        found = true;
                    }
                }
            });
            if (found && region !== currentRegion) {
                regionName.classList.add('fade-out');
                setTimeout(() => {
                    regionName.innerHTML = region; // Pakai innerHTML agar <br> tampil
                    regionName.classList.remove('fade-out');
                    regionName.classList.add('fade-in');
                    setTimeout(() => {
                        regionName.classList.remove('fade-in');
                    }, 700);
                    currentRegion = region;
                }, 700);
            }
        }
        window.addEventListener('scroll', updateRegionName);
        window.addEventListener('resize', updateRegionName);
        updateRegionName();
    </script>
</body>
</html>